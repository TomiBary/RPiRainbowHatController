<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>HydraT</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" rel="stylesheet">
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">-->
    <link href="/res/radial-progress.css" rel="stylesheet">
    <style>
        body {
            background-color: #e5ddd8;
        }

        .daily_target {
            width: 300px;
        }
        .progress-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background:
                    radial-gradient(closest-side, #e5ddd8 60%, transparent 80% 100%),
                    conic-gradient(#0081ff 75%, rgba(0, 47, 255, 0) 0);
        }

        .progress-bar::before {
            content: "75%";
        }
    </style>
  </head>
  <body>
    <header class="container-fluid bg-primary text-white py-3">
      <h1 class="text-center">Hydratační tracker</h1>
    </header>
    <div class="pie-wrapper pie-wrapper--solid progress-88">
      <span class="label">88<span class="smaller">%</span></span>
    </div>

    <main class="container mt-5 text-center">
      <div class="row">
        <h2>Zadejte svůj denní cíl</h2>
        <div class="input-group mb-3 mx-auto daily_target">
          <label for="daily_target"></label><input class="form-control" id="daily_target" placeholder="Množství v mililitrech"
                                                   type="number">
          <span class="input-group-text">ml</span>
        </div>
        <h2>Vypité dnes</h2>
        <div class="row p-3">
          <canvas id="myChart" class="mx-auto" width="300" height="300"></canvas>
<!--          <div class="progress-bar progress-bar-value mx-auto"></div>-->
        </div>
        <div class="h1 text-primary" id="vypito_dnes">0 ml</div>
      </div>

      <div class="row mt-3">
        <div class="col">
          <h2>Přidat sklenici</h2>
          <button class="btn btn-primary" id="add_100ml">Přidat <b>100 ml</b></button>
          <button class="btn btn-primary" id="add_250ml">Přidat <b>250 ml</b></button>
          <button class="btn btn-primary" id="add_500ml">Přidat <b>500 ml</b></button>
        </div>
      </div>

      <div class="row mt-5">
        <div class="col">
          <h2>Historie</h2>
          <ul class="list-group" id="historie">
          </ul>
        </div>
      </div>
    </main>

    <script crossorigin="anonymous"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/res/circle-progress.min.js" type="module"></script>
<!--    <script src="https://tigrr.github.io/circle-progress/js/circle-progress.js" type="module"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const canvas = document.getElementById('myChart');
        const ctx = canvas.getContext('2d');

        const chart = new Chart(ctx, {
            type: 'doughnut', // Typ grafu - pro radiální progress bar použijte 'doughnut'
            data: {
                labels: ['Progress'], // Názvy segmentů (v tomto případě jen jeden)
                datasets: [{
                    label: 'Progress', // Označení pro segment
                    data: [0], // Počáteční hodnota (0)
                    backgroundColor: ['#f5f5f5'], // Barva segmentu
                    borderColor: ['#0081FF'], // Barva okraje segmentu
                    borderWidth: 2, // Šířka okraje segmentu
                }]
            },
            options: {
                cutoutPercentage: 80, // Velikost otvoru v grafu (0-100%)
                legend: {
                    display: false // Skrýt legendu
                },
                tooltips: {
                    enabled: false // Vypnout tooltip
                },
                responsive: true // Automaticky upravit graf pro různé rozměry
            }
        });

        // Funkce pro aktualizaci hodnoty progress baru
        function updateProgress(newValue) {
            canvas.style.width = '25%';
            canvas.style.height = '25%';
            chart.data.datasets[0].data[0] = newValue; // Nastavit novou hodnotu dat
            chart.update(); // Aktualizovat graf
        }

        // Příklad aktualizace progress baru na 50%
        updateProgress(50);

        // Zde bude nutné implementovat JavaScript logiku pro:
        // - Načítání a ukládání denního cíle
        // - Aktualizaci "Vypito dnes" po přidání sklenice
        // - Zobrazování historie vypitého množství
    </script>
  </body>
</html>